var valid_name=0,jsonURL=[],patt=new RegExp(/^[a-z0-9]+$/i),name=document.getElementById("name"),button=document.getElementById("send");
function check_name(){var a=document.getElementById("name"),b=document.getElementById("status");3>a.value.length?(a.style.border="solid #ff4d4d",b.innerHTML="\u0418\u043c\u0435\u0442\u043e \u0435 \u0442\u0432\u044a\u0440\u0434\u0435 \u043a\u044a\u0441\u043e!"):40<a.value.length?(a.style.border="solid #ff4d4d",b.innerHTML="\u0418\u043c\u0435\u0442\u043e \u0435 \u0442\u0432\u044a\u0440\u0434\u0435 \u0434\u044a\u043b\u0433\u043e!"):patt.test(a.value)?(a.style.border="solid #4dff4d",b.innerHTML="",valid_name=
1):(a.style.border="solid #ff4d4d",b.innerHTML="\u0418\u043c\u0435\u0442\u043e \u0441\u044a\u0434\u044a\u0440\u0436\u0430 \u0437\u0430\u0431\u0440\u0430\u043d\u0435\u043d\u0438 \u0437\u043d\u0430\u0446\u0438!")}
function send(){var a=document.getElementById("name"),b=document.getElementById("pass"),d=document.getElementById("status");if(1==valid_name){var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){jsonURL=JSON.parse(c.responseText);d.innerHTML=jsonURL[0].msg1+"<br>"+jsonURL[0].msg2;""!=jsonURL[0].url&&(window.location=jsonURL[0].url);switch(jsonURL[0].stat){case 0:b.style.border="solid #4dff4d";a.style.border="solid #4dff4d";break;case 1:b.style.border="solid #ff4d4d",
a.style.border="solid #ff4d4d"}return!1}};c.open("post","user_login.php",!0);c.setRequestHeader("Content-type","application/x-www-form-urlencoded");c.send("name="+a.value+"&pass="+b.value)}else a.style.border="solid #ff4d4d"}document.getElementById("name").addEventListener("keyup",check_name);button.addEventListener("click",send);